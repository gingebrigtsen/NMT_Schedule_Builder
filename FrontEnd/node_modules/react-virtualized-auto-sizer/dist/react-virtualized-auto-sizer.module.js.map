{"mappings":"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","sources":["src/index.ts","src/AutoSizer.ts","vendor/detectElementResize.js"],"sourcesContent":["import { AutoSizer } from \"./AutoSizer\";\n\nexport default AutoSizer;\n","import {\n  Component,\n  createElement,\n  CSSProperties,\n  HTMLAttributes,\n  ReactElement,\n} from \"react\";\n\n// @ts-ignore\nimport { createDetectElementResize } from \"../vendor/detectElementResize\";\n\nexport type Size = {\n  height?: number;\n  width?: number;\n};\n\nexport type Props = {\n  children: (size: Size) => ReactElement;\n  defaultHeight?: number;\n  defaultWidth?: number;\n  disableHeight?: boolean;\n  disableWidth?: boolean;\n  nonce?: string;\n  onResize?: (size: Size) => void;\n  tagName?: string;\n} & Omit<HTMLAttributes<HTMLDivElement>, \"children\">;\n\ntype State = {\n  height: number;\n  width: number;\n};\n\ntype ResizeHandler = (element: HTMLElement, onResize: () => void) => void;\n\ntype DetectElementResize = {\n  addResizeListener: ResizeHandler;\n  removeResizeListener: ResizeHandler;\n};\n\nexport class AutoSizer extends Component<Props, State> {\n  static defaultProps = {\n    onResize: () => {},\n    disableHeight: false,\n    disableWidth: false,\n    style: {},\n  };\n\n  state = {\n    height: this.props.defaultHeight || 0,\n    width: this.props.defaultWidth || 0,\n  };\n\n  _parentNode: HTMLElement | null = null;\n  _autoSizer: HTMLElement | null = null;\n  _detectElementResize: DetectElementResize | null = null;\n\n  componentDidMount() {\n    const { nonce } = this.props;\n\n    if (\n      this._autoSizer &&\n      this._autoSizer.parentNode &&\n      this._autoSizer.parentNode.ownerDocument &&\n      this._autoSizer.parentNode.ownerDocument.defaultView &&\n      this._autoSizer.parentNode instanceof\n        this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement\n    ) {\n      // Delay access of parentNode until mount.\n      // This handles edge-cases where the component has already been unmounted before its ref has been set,\n      // As well as libraries like react-lite which have a slightly different lifecycle.\n      this._parentNode = this._autoSizer.parentNode;\n\n      // Defer requiring resize handler in order to support server-side rendering.\n      // See issue #41\n      const detectElementResize = createDetectElementResize(nonce);\n      detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n      this._detectElementResize = detectElementResize;\n\n      this._onResize();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._detectElementResize && this._parentNode) {\n      this._detectElementResize.removeResizeListener(\n        this._parentNode,\n        this._onResize\n      );\n    }\n  }\n\n  render(): ReactElement {\n    const {\n      children,\n      defaultHeight,\n      defaultWidth,\n      disableHeight,\n      disableWidth,\n      nonce,\n      onResize,\n      style,\n      tagName = \"div\",\n      ...rest\n    } = this.props;\n\n    const { height, width } = this.state;\n\n    // Outer div should not force width/height since that may prevent containers from shrinking.\n    // Inner component should overflow and use calculated width/height.\n    // See issue #68 for more information.\n    const outerStyle: CSSProperties = { overflow: \"visible\" };\n    const childParams: Size = {};\n\n    // Avoid rendering children before the initial measurements have been collected.\n    // At best this would just be wasting cycles.\n    let bailoutOnChildren = false;\n\n    if (!disableHeight) {\n      if (height === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.height = 0;\n      childParams.height = height;\n    }\n\n    if (!disableWidth) {\n      if (width === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.width = 0;\n      childParams.width = width;\n    }\n\n    return createElement(\n      tagName,\n      {\n        ref: this._setRef,\n        style: {\n          ...outerStyle,\n          ...style,\n        },\n        ...rest,\n      },\n      !bailoutOnChildren && children(childParams)\n    );\n  }\n\n  _onResize = () => {\n    const { disableHeight, disableWidth, onResize } = this.props;\n\n    if (this._parentNode) {\n      // Guard against AutoSizer component being removed from the DOM immediately after being added.\n      // This can result in invalid style values which can result in NaN values if we don't handle them.\n      // See issue #150 for more context.\n\n      const rect = this._parentNode.getBoundingClientRect();\n      const height = rect.height || 0;\n      const width = rect.width || 0;\n\n      const style = window.getComputedStyle(this._parentNode) || {};\n      const paddingLeft = parseInt(style.paddingLeft, 10) || 0;\n      const paddingRight = parseInt(style.paddingRight, 10) || 0;\n      const paddingTop = parseInt(style.paddingTop, 10) || 0;\n      const paddingBottom = parseInt(style.paddingBottom, 10) || 0;\n\n      const newHeight = height - paddingTop - paddingBottom;\n      const newWidth = width - paddingLeft - paddingRight;\n\n      if (\n        (!disableHeight && this.state.height !== newHeight) ||\n        (!disableWidth && this.state.width !== newWidth)\n      ) {\n        this.setState({\n          height: height - paddingTop - paddingBottom,\n          width: width - paddingLeft - paddingRight,\n        });\n\n        if (typeof onResize === \"function\") {\n          onResize({ height, width });\n        }\n      }\n    }\n  };\n\n  _setRef = (autoSizer: HTMLElement | null) => {\n    this._autoSizer = autoSizer;\n  };\n}\n","/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== \"undefined\") {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\n\nlet cancelFrame = null;\nlet requestFrame = null;\n\nconst TIMEOUT_DURATION = 20;\n\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\n\nconst cancelAnimationFrameFn =\n  windowObject.cancelAnimationFrame ||\n  windowObject.mozCancelAnimationFrame ||\n  windowObject.webkitCancelAnimationFrame;\n\nconst requestAnimationFrameFn =\n  windowObject.requestAnimationFrame ||\n  windowObject.mozRequestAnimationFrame ||\n  windowObject.webkitRequestAnimationFrame;\n\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(\n    callback\n  ) {\n    const animationFrameID = requestAnimationFrameFn(\n      function animationFrameCallback() {\n        clearTimeoutFn(timeoutID);\n        callback();\n      }\n    );\n\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n\n    return [animationFrameID, timeoutID];\n  };\n}\n\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    checkTriggers = function (element) {\n      return (\n        element.offsetWidth !== element.__resizeLast__.width ||\n        element.offsetHeight !== element.__resizeLast__.height\n      );\n    };\n\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (\n        e.target.className &&\n        typeof e.target.className.indexOf === \"function\" &&\n        e.target.className.indexOf(\"contract-trigger\") < 0 &&\n        e.target.className.indexOf(\"expand-trigger\") < 0\n      ) {\n        return;\n      }\n\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(\n            fn\n          ) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents =\n      \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\n        \" \"\n      );\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    animationName = \"resizeanim\";\n    animationKeyframes =\n      \"@\" +\n      keyframeprefix +\n      \"keyframes \" +\n      animationName +\n      \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css =\n          (animationKeyframes ? animationKeyframes : \"\") +\n          \".resize-triggers { \" +\n          (animationStyle ? animationStyle : \"\") +\n          \"visibility: hidden; opacity: 0; } \" +\n          '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className =\n          \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ =\n            function animationListener(e) {\n              if (e.animationName === animationName) {\n                resetTriggers(element);\n              }\n            };\n          element.__resizeTriggers__.addEventListener(\n            animationStartEvent,\n            element.__resizeTriggers__.__animationListener__\n          );\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(\n        element.__resizeListeners__.indexOf(fn),\n        1\n      );\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(\n            animationStartEvent,\n            element.__resizeTriggers__.__animationListener__\n          );\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(\n            element.__resizeTriggers__\n          );\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener,\n    removeResizeListener,\n  };\n}\n\nmodule.exports = { createDetectElementResize };\n"],"names":[],"version":3,"file":"react-virtualized-auto-sizer.module.js.map"}