(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39190],{61742:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return n(95202)}])},95202:function(e,t,n){"use strict";n.r(t);var r=n(10797),o=n(35944),c=n(67294),i=n(15664),a=n(39101),l=n(91446),s=n(19574),u=n(27417),d=n(88791),h=function(){var e=(0,c.useState)(!1);e[0],e[1];var t=(0,c.useState)(0),n=t[0],h=t[1],f=(0,c.useState)(5),m=f[0],p=f[1],g=(0,c.useState)("CRN"),C=g[0],T=g[1],Z=(0,c.useState)("asc"),b=Z[0],v=Z[1],w=(0,c.useState)([]),_=w[0],k=w[1],N=(0,c.useState)([]),S=N[0],y=N[1],x=(0,c.useState)([]),R=x[0],E=x[1];(0,c.useEffect)(function(){fetch("http://localhost:5000/api/get_cart",{credentials:"include"}).then(function(e){if(!e.ok)throw Error("HTTP error: ".concat(e.status));return e.json()}).then(function(e){"items"in e?E(e.items):E([]),console.log("Selected results:",R)}).catch(function(e){console.error("Failed to fetch from get_cart:",e)})},[R]);var D=function(e){var t=e.page,r=void 0===t?{index:n,size:m}:t,o=e.sort,c=void 0===o?{field:C,direction:b}:o,i=r.index,a=r.size,l=c.field,s=c.direction;h(i),p(a),T(l),v(s)},P=(0,c.useState)(!1),j=P[0],O=P[1],I=function(){O(!j),y(j?[]:_.map(function(e){return e.CRN}))},X=function(e){var t=S.includes(e)?S.filter(function(t){return t!==e}):(0,r.Z)(S).concat([e]);y(t)},z=function(){E(R.filter(function(e){return!S.includes(e.CRN)}));var e=R.filter(function(e){return S.includes(e.CRN)});y([]),fetch("http://localhost:5000/api/del_cart",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({delItems:e})}).then(function(e){if(!e.ok)throw Error("HTTP error: ".concat(e.status));return e.json()}).then(function(e){console.log("Items removed from cart:",e)}).catch(function(e){console.error("Failed to fetch del_cart:",e)})},F=function(){fetch("http://localhost:5000/api/clear_cart",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){if(!e.ok)throw Error("HTTP error: ".concat(e.status));return e.json()}).catch(function(e){console.error("Failed to fetch del_cart:",e)}),y([]),E([])};(0,c.useEffect)(function(){console.log("Triggered"),k(R.sort(function(e,t){var n=e[C]<t[C];return"desc"==b?n?1:-1:n?-1:1}).slice(n*m,(n+1)*m))},[C,b,n,m,R]);var L=R?R.length:0,B=[{field:"CRN",name:(0,o.tZ)(i.i,{content:"The CRN, or id for the course",children:(0,o.tZ)("span",{children:"CRN"})}),sortable:!0,truncateText:!0},{field:"Course",name:(0,o.tZ)(i.i,{content:"The course code, dept + lvl",children:(0,o.tZ)("span",{children:"Course"})}),sortable:!0,truncateText:!0},{field:"*Campus",name:(0,o.tZ)(i.i,{content:"The campus, eg Main, Distance/Web",children:(0,o.tZ)("span",{children:"Campus"})}),sortable:!0,truncateText:!0},{field:"Days",name:(0,o.tZ)(i.i,{content:"The days of the week on which the course takes place",children:(0,o.tZ)("span",{children:"Days"})}),sortable:!0,truncateText:!0},{field:"Time",name:(0,o.tZ)(i.i,{content:"The time of day in which the course takes place",children:(0,o.tZ)("span",{children:"Time"})}),sortable:!0,truncateText:!0},{field:"Location",name:(0,o.tZ)(i.i,{content:"The building / medium where the class meets",children:(0,o.tZ)("span",{children:"Location"})}),sortable:!0},{name:(0,o.tZ)(a.D,{id:"selectAllCheckbox",label:"Select all rows",checked:j,onChange:I}),width:"32px",render:function(e){return(0,o.tZ)(a.D,{id:e.CRN.toString(),checked:S.includes(e.CRN),onChange:function(){return X(e.CRN)}})}},];return(0,o.BX)("div",{children:[(0,o.tZ)(l.n,{items:_,columns:B,pagination:{pageIndex:n,pageSize:m,totalItemCount:L,pageSizeOptions:[5,10,15]},sorting:{sort:{field:C,direction:b}},onChange:D,rowProps:function(e){var t;return{style:e.cF?{border:"1px solid red",backgroundColor:"lightcoral"}:{}}}}),S.length>0&&(0,o.tZ)(s.Gv,{justifyContent:"flexEnd",children:(0,o.tZ)(u.J,{grow:!1,children:(0,o.BX)(d.g2,{onClick:z,children:["Delete selected ",S.length>1?"items":"item"]})})}),(0,o.tZ)(d.g2,{color:"danger",onClick:F,children:"Delete all items"}),(0,o.tZ)("br",{}),(0,o.tZ)("i",{children:"Red entries indicate a time conflict among your selections."}),(0,o.tZ)("br",{}),(0,o.tZ)("i",{children:"To remove an item from your cart, select it, and click Delete Item(s)."}),(0,o.tZ)("br",{}),(0,o.BX)("i",{children:["Delete all items will remove ",(0,o.tZ)("strong",{children:"ALL"})," items from your cart (Not Recommended)."]})]})};t.default=h}},function(e){e.O(0,[69173,66622,49774,92888,40179],function(){return e(e.s=61742)}),_N_E=e.O()}]);